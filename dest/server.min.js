"use strict";var express=require("express"),mongoose=require("mongoose"),bodyParser=require("body-parser"),routes=require("./src/routes/appRoutes"),jsonwebtoken=require("jsonwebtoken"),app=new express;const PORT=3e3;mongoose.Promise=global.Promise;const options={useNewUrlParser:!0};mongoose.connect("mongodb://oorja:oorja123@ds161312.mlab.com:61312/hambeeredb",options,function(error){error&&console.log(error)}),app.use(bodyParser.urlencoded({extended:!0})),app.use(bodyParser.json()),app.use((request,response,next)=>{request.headers&&request.headers.authorization&&"JWT"===request.headers.authorization.split(" ")[0]?jsonwebtoken.verify(request.headers.authorization.split(" ")[1],"SIGNIN",(error,user)=>{error&&(request.user=void 0),request.user=user,next()}):(request.user=void 0,next())}),routes(app),app.get("/",(req,res)=>res.send("Server is running on port 3000")),app.listen(3e3,()=>console.log("Server is running on port 3000")),module.exports=app;